<!DOCTYPE html>
<html>
<head>
    <title>Donor Entry</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        input, select {
            padding: 5px;
            margin: 5px 0;
        }

        button {
            padding: 5px 10px;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 15px;
        }
    </style>
</head>

<body>

<h2>Donor Entry</h2>

<form id="donorForm">

    <div class="form-group">
        <label>First Name</label><br>
        <input type="text" id="firstName">
    </div>

    <div class="form-group">
        <label>Middle Name</label><br>
        <input type="text" id="middleName">
    </div>

    <div class="form-group">
        <label>Surname</label><br>
        <input type="text" id="surname">
    </div>

    <div class="form-group">
        <label>Birthday</label><br>
        <input type="date" id="birthday">
    </div>

    <div class="form-group">
        <label>Contact Number</label><br>
        <input type="text" id="contact">
    </div>

    <!-- Blood Type + Rh (HORIZONTAL) -->
    <div class="form-group">
        <div style="display:flex; align-items:center; gap:20px;">
            
            <div>
                <label>Blood Type</label><br>
                <select id="bloodType">
                    <option value="">Select</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="AB">AB</option>
                    <option value="O">O</option>
                </select>
            </div>

            <div style="margin-top:22px;">
                <label>
                    <input type="radio" name="rhFactor" value="Positive"> Positive
                </label>

                <label style="margin-left:10px;">
                    <input type="radio" name="rhFactor" value="Negative"> Negative
                </label>
            </div>

        </div>
    </div>

    <!-- Serial with + button -->
    <div class="form-group">
        <label>Serial Number</label><br>
        <div style="display:flex; gap:10px; align-items:center;">
            <input type="text" id="serialInput">
            <input type="date" id="serialDate">
            <button type="button" onclick="addSerial()">+</button>
        </div>

        <div id="serialList"></div>
    </div>

    <button type="button" onclick="saveDonor()">Save</button>

</form>

<script>

let serials = [];

function addSerial() {
    let serialValue = document.getElementById("serialInput").value;
    let dateValue = document.getElementById("serialDate").value;

    if (serialValue === "" || dateValue === "") {
        alert("Enter serial and date");
        return;
    }

    serials.push({
        serial: serialValue,
        date: dateValue
    });

    displaySerials();

    document.getElementById("serialInput").value = "";
    document.getElementById("serialDate").value = "";
}

function displaySerials() {
    let container = document.getElementById("serialList");
    container.innerHTML = "";

    serials.forEach((item) => {
        container.innerHTML += `
            <div>
                ${item.serial} - ${item.date}
            </div>
        `;
    });
}

function saveDonor() {

    let rh = document.querySelector('input[name="rhFactor"]:checked');
    let rhValue = rh ? rh.value : "";

    let donor = {
        firstName: document.getElementById("firstName").value,
        middleName: document.getElementById("middleName").value,
        surname: document.getElementById("surname").value,
        birthday: document.getElementById("birthday").value,
        contact: document.getElementById("contact").value,
        bloodType: document.getElementById("bloodType").value,
        rhFactor: rhValue,
        serials: serials
    };

    let donors = JSON.parse(localStorage.getItem("donors")) || [];
    donors.push(donor);
    localStorage.setItem("donors", JSON.stringify(donors));

    alert("Donor Saved");
    document.getElementById("donorForm").reset();
    serials = [];
    document.getElementById("serialList").innerHTML = "";
}

</script>

</body>
</html>
