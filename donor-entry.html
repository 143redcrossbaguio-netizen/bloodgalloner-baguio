<!DOCTYPE html>
<html>
<head>
    <title>Galloners Club - Donor Entry</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial; background:#f4f4f4; margin:0; }
        header { background:#b30000; color:white; padding:15px; text-align:center; }
        .container { max-width:500px; margin:20px auto; background:white; padding:20px; border-radius:10px; box-shadow:0 3px 10px rgba(0,0,0,0.1); }
        input, select { width:100%; padding:8px; margin-bottom:10px; }
        button { padding:10px; width:100%; background:#b30000; color:white; border:none; border-radius:5px; cursor:pointer; }
    </style>
</head>
<body>

<header>
    <h2>Donor Entry</h2>
</header>

<div class="container">

<input type="text" id="firstName" placeholder="First Name">
<input type="text" id="middleName" placeholder="Middle Name">
<input type="text" id="surname" placeholder="Surname">

<select id="bloodType">
    <option value="">Blood Type</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="AB">AB</option>
    <option value="O">O</option>
</select>

<select id="rhFactor">
    <option value="">Rh Factor</option>
    <option value="+">+</option>
    <option value="-">-</option>
</select>

<input type="date" id="birthday">
<input type="text" id="contact" placeholder="Contact Number">

<button onclick="saveDonor()">Save Donor</button>

</div>

<script>

function saveDonor(){

    let donors = JSON.parse(localStorage.getItem("donors")) || [];

    let editIndex = localStorage.getItem("editIndex");

    let donorData = {
        firstName: document.getElementById("firstName").value,
        middleName: document.getElementById("middleName").value,
        surname: document.getElementById("surname").value,
        bloodType: document.getElementById("bloodType").value,
        rhFactor: document.getElementById("rhFactor").value,
        birthday: document.getElementById("birthday").value,
        contact: document.getElementById("contact").value,
        serials: []
    };

    if(editIndex !== null){
        donorData.serials = donors[editIndex].serials || [];
        donors[editIndex] = donorData;
        localStorage.removeItem("editIndex");
    } else {
        donors.push(donorData);
    }

    localStorage.setItem("donors", JSON.stringify(donors));

    window.location.href = "tracking.html";
}

</script>

</body>
</html>
