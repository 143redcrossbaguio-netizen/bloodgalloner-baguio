<!DOCTYPE html>
<html>
<head>
    <title>Donor Entry</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .form-group {
            margin-bottom: 15px;
        }

        input, select {
            padding: 5px;
            margin: 5px 0;
        }

        button {
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>

<h2>Donor Entry</h2>

<form id="donorForm">

    <div class="form-group">
        <label>First Name</label><br>
        <input type="text" id="firstName">
    </div>

    <div class="form-group">
        <label>Middle Name</label><br>
        <input type="text" id="middleName">
    </div>

    <div class="form-group">
        <label>Surname</label><br>
        <input type="text" id="surname">
    </div>

    <div class="form-group">
        <label>Birthday</label><br>
        <input type="date" id="birthday">
    </div>

    <div class="form-group">
        <label>Contact Number</label><br>
        <input type="text" id="contact">
    </div>

    <div class="form-group">
        <label>Blood Type</label><br>
        <select id="bloodType">
            <option value="">Select</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="AB">AB</option>
            <option value="O">O</option>
        </select>
    </div>

    <div class="form-group">
        <label>Serial Number</label><br>

        <div id="serialContainer">
            <div style="margin-bottom:5px;">
                <input type="text" name="serial[]" placeholder="Serial Number">
                <input type="date" name="serialDate[]">
            </div>
        </div>

        <button type="button" onclick="addSerialField()">+</button>
    </div>

    <button type="button" onclick="saveDonor()">Save</button>

</form>

<script>

function addSerialField() {
    let container = document.getElementById("serialContainer");

    let newField = document.createElement("div");
    newField.style.marginBottom = "5px";

    newField.innerHTML = `
        <input type="text" name="serial[]" placeholder="Serial Number">
        <input type="date" name="serialDate[]">
    `;

    container.appendChild(newField);
}

function saveDonor() {

    let serialInputs = document.getElementsByName("serial[]");
    let dateInputs = document.getElementsByName("serialDate[]");

    let serials = [];

    for (let i = 0; i < serialInputs.length; i++) {
        if (serialInputs[i].value !== "") {
            serials.push({
                serial: serialInputs[i].value,
                date: dateInputs[i].value
            });
        }
    }

    let donor = {
        firstName: document.getElementById("firstName").value,
        middleName: document.getElementById("middleName").value,
        surname: document.getElementById("surname").value,
        birthday: document.getElementById("birthday").value,
        contact: document.getElementById("contact").value,
        bloodType: document.getElementById("bloodType").value,
        serials: serials
    };

    let donors = JSON.parse(localStorage.getItem("donors")) || [];
    donors.push(donor);
    localStorage.setItem("donors", JSON.stringify(donors));

    alert("Donor Saved");
    document.getElementById("donorForm").reset();
    document.getElementById("serialContainer").innerHTML = `
        <div style="margin-bottom:5px;">
            <input type="text" name="serial[]" placeholder="Serial Number">
            <input type="date" name="serialDate[]">
        </div>
    `;
}

</script>

</body>
</html>
